<!DOCTYPE html>
<html>
<head>
<title>Bypassing the queue</title>
<script src="D:\jquery-3.5.1.js"></script>
<script> 
	$(document).ready(function(){
		$('div.label').click(function(){
			var paraWidth=$('div.speech p').outerWidth();
			var $switcher=$(this).parent();					
			var switcherWidth=$switcher.outerWidth();			
			$switcher
			.css({position:'relative',border:"1px solid black"})			
			.fadeTo('fast',0.5)			
			.animate(				
				{left:paraWidth+50- switcherWidth},
				{duration:'slow',queue:false})
			//上から下順で一つずつ実行。
			.fadeTo('slow',1.0)
			.slideUp('slow')
			.queue(function(funEx){
				$switcher.css({backgroundColor:'#f00'});
				funEx();
			})
			.slideDown('slow');
		});
	});
</script>
</head>
<body>	
	<div class="speech">
		<div class="label"> click here</div>
		<p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<br>
			AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<br>
			AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<br>
		</p>
		<P>BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br>
			BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br>
			BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br>
			BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br>
			BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br>
			BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br>		
		</P>
		
	</div>
</body>
</html>